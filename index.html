<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Rock, Paper, Scissors</title>
</head>

<body>
    <script>
        // Computer randomly picks rock, paper, scissors
        function computerPlay() {
            let choice = Math.random(0, 1);
            if (choice < 0.333) {
                console.log("computer: rock");
                return "rock";
            } else if (choice > 0.666) {
                console.log("computer: scissors");
                return "scissors";
            } else {
                console.log("computer: paper");
                return "paper";
            }
        }
        
        // Prompt user to pick rock, paper, scissors
        // Reprompt user for invalid choice
        function userPlay() {
            let userChoice = prompt("Choose rock, paper, or scissors: ").toLowerCase();
            if (userChoice == "rock" || userChoice == "paper" || userChoice == "scissors") {
                console.log("user: " + userChoice);
                return userChoice;
            } else {
                alert("Invalid choice. Choose again.")
                userPlay();
            }
            
        }

        // Compare computer choice to user choice
        // Return values for win, lose, draw cases
        function playRound(player, computer) {
            console.log(player, computer);
            if (player == "rock") {
                switch (computer) {
                    case "rock":
                        console.log("Draw!");
                        return 0;
                    case "paper":
                        console.log("You lose!");
                        return -1;
                    case "scissors":
                        console.log("You win!");
                        return 1;
                }
            } else if (player == "paper") {
                switch (computer) {
                    case "rock":
                        console.log("You win!");
                        return 1;
                    case "paper":
                        console.log("Draw!");
                        return 0;
                    case "scissors":
                        console.log("You lose!");
                        return -1;
                }
            } else {
                switch (computer) {
                    case "rock":
                        console.log("You lose!");
                        return -1;
                    case "paper":
                        console.log("You win!");
                        return 1;
                    case "scissors":
                        console.log("Draw!");
                        return 0;
                }
            }
        }

        

        // Play a game of first to 3 points
        function playGame() {
            let userScore = 0;
            let compScore = 0;
            
            while (userScore < 3 && compScore < 3) {
                let j = playRound(userPlay(), computerPlay());
                if (j == 1) {
                    userScore++;
                    console.log(`Score:
                    user: ${userScore}
                    comp: ${compScore}`);
                } else if (j == -1) {
                    compScore++;
                    console.log(`Score:
                    user: ${userScore}
                    comp: ${compScore}`);
                } else {
                    console.log(`Score:
                    user: ${userScore}
                    comp: ${compScore}`);
                }

                if (userScore == 3) {
                    console.log("You win! Congratulations!");
                    return;
                }

                if (compScore == 3) {
                    console.log("You lose! Better luck next time.");
                    return;
                }
            }
        }

        playGame();

    </script>    
</body>

</html>